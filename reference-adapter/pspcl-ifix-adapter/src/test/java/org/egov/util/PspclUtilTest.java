package org.egov.util;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import org.egov.config.PspclIfixAdapterConfiguration;
import org.egov.repository.SoapServiceRequestRepository;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestInstance;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.mockito.Spy;

import java.io.IOException;

import static org.egov.util.PspclIfixAdapterConstant.PATH_FETCH_PSPCL_BILL;
import static org.egov.util.PspclIfixAdapterConstant.PATH_FETCH_PSPCL_PAYMENT;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.doReturn;

@TestInstance(TestInstance.Lifecycle.PER_CLASS)
class PspclUtilTest {

    @Mock
    private PspclIfixAdapterConfiguration pspclIfixAdapterConfiguration;

    @Mock
    private PspclIfixAdapterUtil pspclIfixAdapterUtil;

    @Mock
    private SoapServiceRequestRepository soapServiceRequestRepository;

    @Spy
    private XmlMapper xmlMapper;

    @Spy
    private ObjectMapper objectMapper;

    private PspclUtil pspclUtil;

    String billReq = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
            "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n" +
            "    <soap:Body>\n" +
            "        <GetBills xmlns=\"http://tempuri.org/\">\n" +
            "            <accountNo>3005754414</accountNo>\n" +
            "        </GetBills>\n" +
            "    </soap:Body>\n" +
            "</soap:Envelope>";

    String billRes = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
            "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n" +
            "    <soap:Body>\n" +
            "        <GetBillsResponse xmlns=\"http://tempuri.org/\">\n" +
            "            <GetBillsResult>[{\"ORDERBYCOLUMN\":\"20211231\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"31-DEC-2021\",\"DATE_READING_CURR\":\"31-DEC-2021\",\"DATE_READING_PREV\":\"09-Dec-2021\",\"DUE_DATE_CASH_ONLINE\":\"17-Jan-2022\",\"DUE_DATE_CHEQUE_DD\":\"17-Jan-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"5552\",\"TOTAL_CONSUMPTION_NEW\":\"5552\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"-12672\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"6000\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"0\",\"SUN_CHRG_TOTAL\":\"0\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"29852\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"363\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"23670\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"24033\",\"RENT_MCB\":\"4\",\"RENT_METER\":\"18\",\"TAX_NET_ED_WITH_SIGN\":\"4161\",\"TAX_NET_IDF_WITH_SIGN\":\"1387\",\"CONSUMPTION_1\":\"2457\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"3736\",\"CONSUMPTION_4\":\"1212\",\"CONSUMPTION_5\":\"1222\",\"CONSUMPTION_6\":\"1026\",\"MTR_READING_CURR\":\"12194.49\",\"MTR_READING_PREV\":\"6642\",\"CGST\":\"1.98\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"-12672\",\"RENT_TOTAL\":\"25.96\",\"SGST\":\"1.98\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"5548\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"10\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"22\",\"FC_LOAD\":\"12\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"694\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"2806\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"OK\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"5552\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"36338.96\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10027774-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"52206363939\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|||\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"12640.00/-   Dated : 20211228\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"O\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"2.02/1.02\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"5552\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"18\",\"MTR_RENT_CGST_AMT\":\"3.24\",\"MTR_RENT_SGST_AMT\":\"3.24\",\"MTR_RENT_TTL_AMT\":\"24.48\",\"MCB_RENT_TAX_AMT\":\"4\",\"MCB_RENT_CGST_AMT\":\".72\",\"MCB_RENT_SGST_AMT\":\".72\",\"MCB_RENT_TTL_AMT\":\"5.44\",\"EE_QTY\":\"5552\",\"EE_NON_TAX_AMT\":\"30546\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"30546\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220108123303\"},{\"ORDERBYCOLUMN\":\"20211231\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"31-DEC-2021\",\"DATE_READING_CURR\":\"31-DEC-2021\",\"DATE_READING_PREV\":\"09-Dec-2021\",\"DUE_DATE_CASH_ONLINE\":\"17-Jan-2022\",\"DUE_DATE_CHEQUE_DD\":\"17-Jan-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"5552\",\"TOTAL_CONSUMPTION_NEW\":\"5552\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"-12672\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"6000\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"0\",\"SUN_CHRG_TOTAL\":\"0\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"29852\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"363\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"23670\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"24033\",\"RENT_MCB\":\"4\",\"RENT_METER\":\"18\",\"TAX_NET_ED_WITH_SIGN\":\"4161\",\"TAX_NET_IDF_WITH_SIGN\":\"1387\",\"CONSUMPTION_1\":\"2457\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"3736\",\"CONSUMPTION_4\":\"1212\",\"CONSUMPTION_5\":\"1222\",\"CONSUMPTION_6\":\"1026\",\"MTR_READING_CURR\":\"12194.49\",\"MTR_READING_PREV\":\"6642\",\"CGST\":\"1.98\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"-12672\",\"RENT_TOTAL\":\"25.96\",\"SGST\":\"1.98\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"5548\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"10\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"22\",\"FC_LOAD\":\"12\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"694\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"2806\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"OK\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"5552\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"36338.96\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10027774-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"52206363939\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|RS. 0 HAS BEEN CHARGED AS LATE PAYMENT SURCHARGE, RS. 0 HAS BEEN CHARGED AS INTEREST ON UNPAID AMOUNT|PAYMENTS EXCEEDING RS.20,000/- SHALL BE ACCEPTED IN DIGITAL MODE ONLY W.E.F. 01/07/2021|CHARGES HAS BEEN CHARGED AS ED @ 13% OF SOP, MT @ 2% OF SOP, IDF @ 5% OF SOP, COWCESS @ 1 OR 2 PAISA PER KWH/KVAH\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"12640.00/-   Dated : 20211228\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"O\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"2.02/1.02\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"5552\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"18\",\"MTR_RENT_CGST_AMT\":\"3.24\",\"MTR_RENT_SGST_AMT\":\"3.24\",\"MTR_RENT_TTL_AMT\":\"24.48\",\"MCB_RENT_TAX_AMT\":\"4\",\"MCB_RENT_CGST_AMT\":\".72\",\"MCB_RENT_SGST_AMT\":\".72\",\"MCB_RENT_TTL_AMT\":\"5.44\",\"EE_QTY\":\"5552\",\"EE_NON_TAX_AMT\":\"30546\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"30546\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220328214128\"},{\"ORDERBYCOLUMN\":\"20220123\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"23-JAN-2022\",\"DATE_READING_CURR\":\"23-JAN-2022\",\"DATE_READING_PREV\":\"31-Dec-2021\",\"DUE_DATE_CASH_ONLINE\":\"07-Feb-2022\",\"DUE_DATE_CHEQUE_DD\":\"07-Feb-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"2008\",\"TOTAL_CONSUMPTION_NEW\":\"2008\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"-8\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"9500\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"0\",\"SUN_CHRG_TOTAL\":\"0\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"10821\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"202\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"12090\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"12292\",\"RENT_MCB\":\"5\",\"RENT_METER\":\"19\",\"TAX_NET_ED_WITH_SIGN\":\"1508\",\"TAX_NET_IDF_WITH_SIGN\":\"503\",\"CONSUMPTION_1\":\"2618\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"1212\",\"CONSUMPTION_4\":\"1222\",\"CONSUMPTION_5\":\"1026\",\"CONSUMPTION_6\":\"1998\",\"MTR_READING_CURR\":\"14202\",\"MTR_READING_PREV\":\"12194.49\",\"CGST\":\"2.16\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"-8\",\"RENT_TOTAL\":\"28.32\",\"SGST\":\"2.16\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"2011\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"11\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"23\",\"FC_LOAD\":\"12\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"726\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"1492\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"AVERAGE\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"2008\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"12094.32\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10027774-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"1004029029\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|RS. 0 HAS BEEN CHARGED AS LATE PAYMENT SURCHARGE, RS. 0 HAS BEEN CHARGED AS INTEREST ON UNPAID AMOUNT|PAYMENTS EXCEEDING RS.20,000/- SHALL BE ACCEPTED IN DIGITAL MODE ONLY W.E.F. 01/07/2021|CHARGES HAS BEEN CHARGED AS ED @ 13% OF SOP, MT @ 2% OF SOP, IDF @ 5% OF SOP, COWCESS @ 1 OR 2 PAISA PER KWH/KVAH\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"3620.00/-   Dated : 20220120\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"R\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"4.9/-2.02\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"2008\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"19\",\"MTR_RENT_CGST_AMT\":\"3.42\",\"MTR_RENT_SGST_AMT\":\"3.42\",\"MTR_RENT_TTL_AMT\":\"25.84\",\"MCB_RENT_TAX_AMT\":\"5\",\"MCB_RENT_CGST_AMT\":\".9\",\"MCB_RENT_SGST_AMT\":\".9\",\"MCB_RENT_TTL_AMT\":\"6.80\",\"EE_QTY\":\"2008\",\"EE_NON_TAX_AMT\":\"11547\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"11547\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220328214038\"},{\"ORDERBYCOLUMN\":\"20220124\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"24-JAN-2022\",\"DATE_READING_CURR\":\"24-JAN-2022\",\"DATE_READING_PREV\":\"23-Jan-2022\",\"DUE_DATE_CASH_ONLINE\":\"07-Feb-2022\",\"DUE_DATE_CHEQUE_DD\":\"07-Feb-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"87\",\"TOTAL_CONSUMPTION_NEW\":\"87\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"11679\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"9500\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"4.32\",\"SUN_CHRG_TOTAL\":\"4.32\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"473\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"9\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"12210\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"12219\",\"RENT_MCB\":\"0\",\"RENT_METER\":\"1\",\"TAX_NET_ED_WITH_SIGN\":\"66\",\"TAX_NET_IDF_WITH_SIGN\":\"22\",\"CONSUMPTION_1\":\"2618\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"1212\",\"CONSUMPTION_4\":\"1222\",\"CONSUMPTION_5\":\"1026\",\"CONSUMPTION_6\":\"1998\",\"MTR_READING_CURR\":\"14289\",\"MTR_READING_PREV\":\"14202\",\"CGST\":\".09\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"11679\",\"RENT_TOTAL\":\"1.18\",\"SGST\":\".09\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"88\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"11\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"1\",\"FC_LOAD\":\"12\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"32\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"65\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"AVERAGE\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"87\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"529.18\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10027774-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"1004029069\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|RS. 0 HAS BEEN CHARGED AS LATE PAYMENT SURCHARGE, RS. 0 HAS BEEN CHARGED AS INTEREST ON UNPAID AMOUNT|PAYMENTS EXCEEDING RS.20,000/- SHALL BE ACCEPTED IN DIGITAL MODE ONLY W.E.F. 01/07/2021|CHARGES HAS BEEN CHARGED AS ED @ 13% OF SOP, MT @ 2% OF SOP, IDF @ 5% OF SOP, COWCESS @ 1 OR 2 PAISA PER KWH/KVAH\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"3620.00/-   Dated : 20220120\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"R\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"2.4/-4.9\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"87\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"1\",\"MTR_RENT_CGST_AMT\":\".18\",\"MTR_RENT_SGST_AMT\":\".18\",\"MTR_RENT_TTL_AMT\":\"1.36\",\"MCB_RENT_TAX_AMT\":\"0\",\"MCB_RENT_CGST_AMT\":\"0\",\"MCB_RENT_SGST_AMT\":\"0\",\"MCB_RENT_TTL_AMT\":\"0\",\"EE_QTY\":\"87\",\"EE_NON_TAX_AMT\":\"505\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"505\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220328214039\"},{\"ORDERBYCOLUMN\":\"20220217\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"17-FEB-2022\",\"DATE_READING_CURR\":\"17-FEB-2022\",\"DATE_READING_PREV\":\"24-Jan-2022\",\"DUE_DATE_CASH_ONLINE\":\"28-Feb-2022\",\"DUE_DATE_CHEQUE_DD\":\"28-Feb-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"1133\",\"TOTAL_CONSUMPTION_NEW\":\"1133\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"12420\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"9500\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"0\",\"SUN_CHRG_TOTAL\":\"0\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"6100\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"197\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"22250\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"22447\",\"RENT_MCB\":\"5\",\"RENT_METER\":\"20\",\"TAX_NET_ED_WITH_SIGN\":\"850\",\"TAX_NET_IDF_WITH_SIGN\":\"283\",\"CONSUMPTION_1\":\"3736\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"1222\",\"CONSUMPTION_4\":\"1026\",\"CONSUMPTION_5\":\"1998\",\"CONSUMPTION_6\":\"3065\",\"MTR_READING_CURR\":\"1133\",\"MTR_READING_PREV\":\"0\",\"CGST\":\"2.25\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"12420\",\"RENT_TOTAL\":\"29.5\",\"SGST\":\"2.25\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"1133\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"11\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"24\",\"FC_LOAD\":\"12\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"757\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"1189\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"OK\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"1133\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"9830.50\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10006539-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"1004101744\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|RS. 207 HAS BEEN CHARGED AS LATE PAYMENT SURCHARGE, RS. 0 HAS BEEN CHARGED AS INTEREST ON UNPAID AMOUNT|PAYMENTS EXCEEDING RS.20,000/- SHALL BE ACCEPTED IN DIGITAL MODE ONLY W.E.F. 01/07/2021|CHARGES HAS BEEN CHARGED AS ED @ 13% OF SOP, MT @ 2% OF SOP, IDF @ 5% OF SOP, COWCESS @ 1 OR 2 PAISA PER KWH/KVAH\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"2260.00/-   Dated : 20220124\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"O\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"2.02/-2.4\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"1133\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"20\",\"MTR_RENT_CGST_AMT\":\"3.6\",\"MTR_RENT_SGST_AMT\":\"3.6\",\"MTR_RENT_TTL_AMT\":\"27.20\",\"MCB_RENT_TAX_AMT\":\"5\",\"MCB_RENT_CGST_AMT\":\".9\",\"MCB_RENT_SGST_AMT\":\".9\",\"MCB_RENT_TTL_AMT\":\"6.80\",\"EE_QTY\":\"1133\",\"EE_NON_TAX_AMT\":\"6857\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"6857\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220217180633\"},{\"ORDERBYCOLUMN\":\"20220316\",\"TARIFF_TYPE\":\"SAP-SBM-SP SMALL POWER FOR DPC-0\",\"BILL_ISSUE_DATE\":\"16-MAR-2022\",\"DATE_READING_CURR\":\"16-MAR-2022\",\"DATE_READING_PREV\":\"17-Feb-2022\",\"DUE_DATE_CASH_ONLINE\":\"01-Apr-2022\",\"DUE_DATE_CHEQUE_DD\":\"01-Apr-2022\",\"ACCOUNT_NO\":\"3005754414\",\"OLD_ACCOUNT_NO\":\"0\",\"MRU\":\"\",\"SUB_DIVISION_CODE\":\"2422\",\"EC_000_100_KWH_AMOUNT\":\"0\",\"EC_101_300_KWH_AMOUNT\":\"0\",\"EC_301_500_KWH_AMOUNT\":\"0\",\"EC_501_ABOVE_KWH_AMOUNT\":\"0\",\"MOBILE_NO\":\"\",\"EMAIL_ID\":\"\",\"METER_SECURITY_AMOUNT\":\"1880\",\"TOTAL_CONSUMPTION\":\"4138\",\"TOTAL_CONSUMPTION_NEW\":\"4138\",\"TOTAL_CONSUMPTION_OLD\":\"0\",\"PRE_ARR_SURCHARGES\":\"0\",\"PRE_ARR_TOTAL\":\"22743\",\"PRE_ADJ_ENERGY_CHARGES\":\"0\",\"PRE_ADJ_FCA_PLUS_RENTALS\":\"0\",\"PRE_ADJ_FIXED_CHARGES\":\"0\",\"PRE_ADJ_TAXES\":\"0\",\"PRE_ADJ_TOTAL\":\"0\",\"SECURITY_CONS_AMOUNT\":\"9500\",\"SUN_ALLW_EC\":\"0\",\"SUN_ALLW_FC\":\"0\",\"SUN_ALLW_FCA_PLUS_RENTALS\":\"0\",\"SUN_ALLW_TAXES\":\"0\",\"SUN_ALLW_TOTAL\":\"0\",\"SUN_CHRG_EC\":\"0\",\"SUN_CHRG_FC\":\"0\",\"SUN_CHRG_FCA_PLUS_RENTALS\":\"0\",\"SUN_CHRG_TAXES\":\"0\",\"SUN_CHRG_TOTAL\":\"0\",\"CONNECTED_LOAD\":\"12\",\"EC_KWH_TOTAL_AMOUNT\":\"22264\",\"FUEL_COST_ADJ_AMOUNT\":\"0\",\"LPSC_2_PERCENT\":\"497\",\"PAYABLE_AMOUNT_BY_DUE_DATE\":\"47600\",\"PAYABLE_AMOUNT_UPTO_15_DAYS\":\"48097\",\"RENT_MCB\":\"6\",\"RENT_METER\":\"25\",\"TAX_NET_ED_WITH_SIGN\":\"3103\",\"TAX_NET_IDF_WITH_SIGN\":\"1034\",\"CONSUMPTION_1\":\"1212\",\"CONSUMPTION_2\":\"0\",\"CONSUMPTION_3\":\"1026\",\"CONSUMPTION_4\":\"1998\",\"CONSUMPTION_5\":\"3065\",\"CONSUMPTION_6\":\"4873\",\"MTR_READING_CURR\":\"5271\",\"MTR_READING_PREV\":\"1133\",\"CGST\":\"2.79\",\"DATE_OF_CONNECTION\":\"20201027\",\"PRE_ARR_PENDING_AMOUNT\":\"22743\",\"RENT_TOTAL\":\"36.58\",\"SGST\":\"2.79\",\"SUN_ALLW_NOTICE_DATE\":\"\",\"SUN_CHRG_NOTICE_DATE\":\"\",\"TAX_TOTAL\":\"4137\",\"MTR_DIGIT\":\"6\",\"FC_RATE_KW_MON\":\"80\",\"SUBSIDY_UNITS\":\"0\",\"BILL_CYCLE\":\"1\",\"EC_000_100_KWH_RATE\":\"0\",\"EC_101_300_KWH_RATE\":\"0\",\"EC_301_500_KWH_RATE\":\"0\",\"EC_501_ABOVE_KWH_RATE\":\"0\",\"FC_BILL_PERIOD\":\"27\",\"FC_LOAD\":\"9.6\",\"FUEL_COST_ADJ_RATE\":\"0\",\"FUEL_COST_ADJ_UNITS\":\"0\",\"FC_TOTAL\":\"682\",\"INTEREST_OF_SECURITY\":\"0\",\"UNITS_CONCESSION\":\"0\",\"PRE_ARR_INTEREST\":\"0\",\"TAX_NET_COWCESS_WITH_SIGN\":\"0\",\"SUBSIDY_GOP_AMOUNT\":\"2257\",\"TAX_NET_MC_WITH_SIGN\":\"0\",\"BILL_STATUS\":\"OK\",\"EC_000_100_KWH_UNITS\":\"0\",\"EC_101_300_KWH_UNITS\":\"0\",\"EC_301_500_KWH_UNITS\":\"0\",\"EC_501_ABOVE_KWH_UNITS\":\"0\",\"METER_MULTIPLIER\":\"0\",\"BILL_GROUP\":\"0\",\"CONSUMER_ADDRESS\":\"0-#P.NO 11 ABADI CHANDER NAGAR LUDHIANA-141008-INDIA\",\"EXTRA1\":\"4138\",\"EXTRA10\":\"0\",\"EXTRA2\":\"0\",\"EXTRA3\":\"24862.58\",\"EXTRA4\":\"0\",\"EXTRA5\":\"0\",\"EXTRA6\":\"0\",\"EXTRA7\":\"0\",\"EXTRA8\":\"0\",\"EXTRA9\":\"0\",\"SUN_ALLW_NOTICE_NO\":\"\",\"FEEDER_CODE\":\"\",\"MTR_CAPACITY\":\"()\",\"MTR_NO\":\"10006539-0\",\"SUN_CHRG_NOTICE_NO\":\"\",\"BILL_NO\":\"50611295032\",\"CIRCLE\":\"WEST CITY LUDHIANA\",\"DIVISION\":\"CITY WEST SPECIAL DI\",\"MESSAGE\":\"0|RS. 414 HAS BEEN CHARGED AS LATE PAYMENT SURCHARGE, RS. 158.00 HAS BEEN CHARGED AS INTEREST ON UNPAID AMOUNT|PAYMENTS EXCEEDING RS.20,000/- SHALL BE ACCEPTED IN DIGITAL MODE ONLY W.E.F. 01/07/2021|CHARGES HAS BEEN CHARGED AS ED @ 13% OF SOP, MT @ 2% OF SOP, IDF @ 5% OF SOP, COWCESS @ 1 OR 2 PAISA PER KWH/KVAH\",\"INV_REMARKS\":\"INVOICE CUM BILL OF SUPPLY\",\"PAYMENT_HISTORY_1\":\"17500.00/-   Dated : 20220222\",\"SUB_DIV_NAME\":\"SUB DIVISION-(T)/UNIT-1\",\"EMPID\":\"\",\"USERID\":\"\",\"CONSUMER_NAME\":\"MR.  MOHD.  SULTAN\",\"CONSUMER_GSTIN\":\"\",\"MTR_MAKE\":\"HPL ELECTRIC \\u0026 POWER\",\"CURRENT_METER_CODE\":\"O\",\"RENT_OTHER\":\"\",\"SUN_ALLW_CUR_PRE_ROUNDING\":\"-3.56/-2.02\",\"PAYMENT_HISTORY_2\":\"\",\"PAYMENT_HISTORY_3\":\"\",\"PAYMENT_HISTORY_4\":\"\",\"PAYMENT_HISTORY_5\":\"\",\"PAYMENT_HISTORY_6\":\"\",\"ADD_SUR_UNITS\":\"4138\",\"ADD_SUR_RATE\":\".3\",\"ADD_SUR_AMT\":\"0\",\"MTR_RENT_TAX_AMT\":\"25\",\"MTR_RENT_CGST_AMT\":\"4.5\",\"MTR_RENT_SGST_AMT\":\"4.5\",\"MTR_RENT_TTL_AMT\":\"34\",\"MCB_RENT_TAX_AMT\":\"6\",\"MCB_RENT_CGST_AMT\":\"1.08\",\"MCB_RENT_SGST_AMT\":\"1.08\",\"MCB_RENT_TTL_AMT\":\"8.16\",\"EE_QTY\":\"4138\",\"EE_NON_TAX_AMT\":\"22946\",\"EE_RENT_TAX_AMT\":\"0\",\"EE_RENT_CGST_AMT\":\"0\",\"EE_RENT_SGST_AMT\":\"0\",\"EE_RENT_TTL_AMT\":\"22946\",\"SC_WSD_AMT_WITHHELD\":\"0\",\"TNAME\":\"NF_SAP_SBM_GSC\",\"SYNCDT\":\"20220323082113\"}]</GetBillsResult>\n" +
            "        </GetBillsResponse>\n" +
            "    </soap:Body>\n" +
            "</soap:Envelope>";

    String paymentReq = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
            "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n" +
            "    <soap:Body>\n" +
            "        <GetPayments xmlns=\"http://tempuri.org/\">\n" +
            "            <accountNo>3005754414</accountNo>\n" +
            "        </GetPayments>\n" +
            "    </soap:Body>\n" +
            "</soap:Envelope>";

    String paymentRes = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
            "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n" +
            "    <soap:Body>\n" +
            "        <GetPaymentsResponse xmlns=\"http://tempuri.org/\">\n" +
            "            <GetPaymentsResult>[{\"TXNID\":\"BLS2101145390195\",\"TXNDATE\":\"1/14/2021 7:46:01 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"15670\",\"BILCYC\":\"10\",\"BILGRP\":\"null\",\"BILNO\":\"50014046776\",\"BILISSDT\":\"1/8/2021 12:00:00 AM\",\"DUEDTCASH\":\"1/18/2021 12:00:00 AM\",\"DUEDTCHQ\":\"1/18/2021 12:00:00 AM\",\"BILYR\":\"2020\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"null\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"153897470\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"1/14/2021 7:45:37 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"34774\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"1/14/2021 7:46:02 PM\",\"ED\":\"2605\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"13026\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"261\",\"TOT_AMT\":\"15670\",\"AMT_AFTER_DUEDATE\":\"15931\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"-1\"},{\"TXNID\":\"BLS2102186002354\",\"TXNDATE\":\"2/18/2021 11:12:49 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"15780\",\"BILCYC\":\"11\",\"BILGRP\":\"null\",\"BILNO\":\"51807416884\",\"BILISSDT\":\"2/9/2021 12:00:00 AM\",\"DUEDTCASH\":\"2/19/2021 12:00:00 AM\",\"DUEDTCHQ\":\"2/19/2021 12:00:00 AM\",\"BILYR\":\"2020\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"null\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"155516330\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"2/18/2021 11:12:49 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"36134\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"2/18/2021 11:12:54 AM\",\"ED\":\"2624\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"13116\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"263\",\"TOT_AMT\":\"15780\",\"AMT_AFTER_DUEDATE\":\"16043\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"-1\"},{\"TXNID\":\"BPS2103156965539\",\"TXNDATE\":\"3/15/2021 12:19:52 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"19240\",\"BILCYC\":\"12\",\"BILGRP\":\"null\",\"BILNO\":\"50609218492\",\"BILISSDT\":\"3/10/2021 12:00:00 AM\",\"DUEDTCASH\":\"3/22/2021 12:00:00 AM\",\"DUEDTCHQ\":\"3/22/2021 12:00:00 AM\",\"BILYR\":\"2020\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"null\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"156682567\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"3/15/2021 12:19:52 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"37050\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"3/15/2021 12:20:23 PM\",\"ED\":\"3759\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"15443\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"310\",\"TOT_AMT\":\"19240\",\"AMT_AFTER_DUEDATE\":\"19550\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"-1\"},{\"TXNID\":\"BPS2104109375657\",\"TXNDATE\":\"4/10/2021 2:30:58 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"7380\",\"BILCYC\":\"01\",\"BILGRP\":\"null\",\"BILNO\":\"50212266234\",\"BILISSDT\":\"4/9/2021 12:00:00 AM\",\"DUEDTCASH\":\"4/19/2021 12:00:00 AM\",\"DUEDTCHQ\":\"4/19/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"157912209\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"4/10/2021 2:30:58 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"38073\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"4/10/2021 2:31:01 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"123\",\"TOT_AMT\":\"7380\",\"AMT_AFTER_DUEDATE\":\"7503\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"-1\"},{\"TXNID\":\"BPS2105126329824\",\"TXNDATE\":\"5/12/2021 12:16:24 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"7260\",\"BILCYC\":\"02\",\"BILGRP\":\"null\",\"BILNO\":\"50014620881\",\"BILISSDT\":\"5/4/2021 12:00:00 AM\",\"DUEDTCASH\":\"5/17/2021 12:00:00 AM\",\"DUEDTCHQ\":\"5/17/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"159129123\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"5/12/2021 12:16:24 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"39316\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"5/12/2021 12:16:34 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"124\",\"TOT_AMT\":\"7260\",\"AMT_AFTER_DUEDATE\":\"7384\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"-1\"},{\"TXNID\":\"BPS2106120960106\",\"TXNDATE\":\"6/12/2021 7:09:59 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"6250\",\"BILCYC\":\"03\",\"BILGRP\":\"null\",\"BILNO\":\"50609585999\",\"BILISSDT\":\"6/8/2021 12:00:00 AM\",\"DUEDTCASH\":\"6/18/2021 12:00:00 AM\",\"DUEDTCHQ\":\"6/18/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"160598980\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"6/12/2021 7:09:59 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"40281\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"6/12/2021 7:10:01 AM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"104\",\"TOT_AMT\":\"6250\",\"AMT_AFTER_DUEDATE\":\"6354\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2107087767186\",\"TXNDATE\":\"7/8/2021 9:48:11 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"12050\",\"BILCYC\":\"04\",\"BILGRP\":\"null\",\"BILNO\":\"51608467327\",\"BILISSDT\":\"7/6/2021 12:00:00 AM\",\"DUEDTCASH\":\"7/16/2021 12:00:00 AM\",\"DUEDTCHQ\":\"7/16/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"161828123\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"7/8/2021 9:48:11 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"41153\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"7/8/2021 9:48:40 AM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"201\",\"TOT_AMT\":\"12050\",\"AMT_AFTER_DUEDATE\":\"12251\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BPS2108124199719\",\"TXNDATE\":\"8/12/2021 8:59:53 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"20700\",\"BILCYC\":\"05\",\"BILGRP\":\"null\",\"BILNO\":\"52605348753\",\"BILISSDT\":\"8/9/2021 12:00:00 AM\",\"DUEDTCASH\":\"8/19/2021 12:00:00 AM\",\"DUEDTCHQ\":\"8/19/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"163597353\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"8/12/2021 8:59:53 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"42317\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"8/12/2021 9:00:18 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"352\",\"TOT_AMT\":\"20700\",\"AMT_AFTER_DUEDATE\":\"21052\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2110279396623\",\"TXNDATE\":\"10/27/2021 12:36:12 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"62350\",\"BILCYC\":\"07\",\"BILGRP\":\"null\",\"BILNO\":\"1003787591\",\"BILISSDT\":\"10/25/2021 12:00:00 AM\",\"DUEDTCASH\":\"11/8/2021 12:00:00 AM\",\"DUEDTCHQ\":\"11/8/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"167321526\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"10/27/2021 12:36:41 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"44559\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"10/27/2021 12:36:47 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"298\",\"TOT_AMT\":\"62350\",\"AMT_AFTER_DUEDATE\":\"62648\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2111189721393\",\"TXNDATE\":\"11/18/2021 12:00:00 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"15310\",\"BILCYC\":\"0\",\"BILGRP\":\"0\",\"BILNO\":\"0\",\"BILISSDT\":\"\",\"DUEDTCASH\":\"\",\"DUEDTCHQ\":\"\",\"BILYR\":\"\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"\",\"DIVNAME\":\"\",\"CIRNAME\":\"\",\"RECEIPTNO\":\"168533938\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"11/18/2021 12:00:00 AM\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"11/22/2021 5:03:22 PM\",\"PG_STATUS\":\"Pending\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"45161\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"11/22/2021 5:10:44 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"0\",\"TOT_AMT\":\"15310\",\"AMT_AFTER_DUEDATE\":\"0\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2111189712909\",\"TXNDATE\":\"11/18/2021 11:41:22 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"15310\",\"BILCYC\":\"08\",\"BILGRP\":\"null\",\"BILNO\":\"51808815170\",\"BILISSDT\":\"11/9/2021 12:00:00 AM\",\"DUEDTCASH\":\"11/22/2021 12:00:00 AM\",\"DUEDTCHQ\":\"11/22/2021 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"168367993\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"11/18/2021 11:42:14 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"45160\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"11/18/2021 11:42:22 AM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"257\",\"TOT_AMT\":\"15310\",\"AMT_AFTER_DUEDATE\":\"15567\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BPS2112283292228\",\"TXNDATE\":\"12/28/2021 4:39:03 PM\",\"ACNO\":\"3005754414\",\"AMT\":\"12640\",\"BILCYC\":\"09\",\"BILGRP\":\"null\",\"BILNO\":\"51409563478\",\"BILISSDT\":\"12/23/2021 12:00:00 AM\",\"DUEDTCASH\":\"1/3/2022 12:00:00 AM\",\"DUEDTCHQ\":\"1/3/2022 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"MSSP/SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"170530888\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"12/28/2021 4:39:04 PM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"45957\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"12/28/2021 4:39:07 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"163\",\"TOT_AMT\":\"12640\",\"AMT_AFTER_DUEDATE\":\"12803\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2112300402531\",\"TXNDATE\":\"12/30/2021 12:00:00 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"12640\",\"BILCYC\":\"0\",\"BILGRP\":\"0\",\"BILNO\":\"0\",\"BILISSDT\":\"\",\"DUEDTCASH\":\"\",\"DUEDTCHQ\":\"\",\"BILYR\":\"\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"\",\"DIVNAME\":\"\",\"CIRNAME\":\"\",\"RECEIPTNO\":\"170692752\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"12/30/2021 12:00:00 AM\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"12/31/2021 2:51:00 PM\",\"PG_STATUS\":\"Pending\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"46001\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"12/31/2021 3:02:30 PM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_NONSBM\",\"SURCHARGE\":\"0\",\"TOT_AMT\":\"12640\",\"AMT_AFTER_DUEDATE\":\"0\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BPS2201129738850\",\"TXNDATE\":\"1/12/2022 11:46:43 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"23670\",\"BILCYC\":\"10\",\"BILGRP\":\"null\",\"BILNO\":\"52206363939\",\"BILISSDT\":\"12/31/2021 12:00:00 AM\",\"DUEDTCASH\":\"1/17/2022 12:00:00 AM\",\"DUEDTCHQ\":\"1/17/2022 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"10\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"171324225\",\"AGENCY_CODE\":\"BBPS00001\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BPS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"1/12/2022 11:46:42 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"46260\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"1/12/2022 11:46:54 AM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_SBM_GSC\",\"SURCHARGE\":\"363\",\"TOT_AMT\":\"23670\",\"AMT_AFTER_DUEDATE\":\"24033\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"},{\"TXNID\":\"BLS2203231759840\",\"TXNDATE\":\"3/23/2022 8:53:03 AM\",\"ACNO\":\"3005754414\",\"AMT\":\"47600\",\"BILCYC\":\"1\",\"BILGRP\":\"null\",\"BILNO\":\"50611295032\",\"BILISSDT\":\"3/16/2022 12:00:00 AM\",\"DUEDTCASH\":\"4/1/2022 12:00:00 AM\",\"DUEDTCHQ\":\"4/1/2022 12:00:00 AM\",\"BILYR\":\"null\",\"CATEGORY\":\"SP SMALL POWER FOR DPC\",\"VID\":\"12\",\"STATUS_P\":\"SUCCESS\",\"MBNO\":\"9675543665\",\"EMAIL\":\"\",\"PG_ERR_MSG\":\"\",\"PG_ERR_CODE\":\"\",\"CNAME\":\"MR.  MOHD.  SULTAN\",\"SUBDIVNAME\":\"SUB DIVISION-(T)/UNIT-1\",\"DIVNAME\":\"CITY WEST SPECIAL DI\",\"CIRNAME\":\"WEST CITY LUDHIANA\",\"RECEIPTNO\":\"175388280\",\"AGENCY_CODE\":\"BBPS00002\",\"PAYMENT_MODE\":\"CS\",\"BRANCH\":\"BLS\",\"CASHDESK\":\"01\",\"CHEQUE_DATE\":\"\",\"CHEQUE_NO\":\"\",\"RECEIPTDT\":\"3/23/2022 8:53:03 AM\",\"PG_STATUS\":\"\",\"PG_REF_ID\":\"\",\"RECON_ID\":\"48104\",\"SYNCED\":\"S\",\"SYNCMSG\":\"~\",\"SYNCDT\":\"3/23/2022 8:53:07 AM\",\"ED\":\"0\",\"OCTRAI\":\"0\",\"IF_SAP\":\"Y\",\"SOP\":\"0\",\"WATER_SUPPLY\":\"\",\"CODE_SDIV\":\"2422\",\"TBL_NAME\":\"SAP_SBM_GSC\",\"SURCHARGE\":\"497\",\"TOT_AMT\":\"47600\",\"AMT_AFTER_DUEDATE\":\"48097\",\"PU_WEBHOOK_ID\":\"\",\"ELID\":\"\",\"CONSUMER_ID\":\"\",\"SEND_MAIL_MSG\":\"-1\",\"SEND_MOB_SMS\":\"1\"}]</GetPaymentsResult>\n" +
            "        </GetPaymentsResponse>\n" +
            "    </soap:Body>\n" +
            "</soap:Envelope>";

    @BeforeEach
    private void init() throws IOException {
        MockitoAnnotations.openMocks(this);
        pspclUtil = new PspclUtil(pspclIfixAdapterConfiguration, pspclIfixAdapterUtil, soapServiceRequestRepository
                , xmlMapper, objectMapper);
    }

    @Test
    void testGetBillsFromPspclWithEmptyReqFile() {
        assertTrue((new PspclUtil()).getBillsFromPspcl("4256789").isEmpty());
    }

    @Test
    void testGetBillsFromPspcl() throws IOException {
        doReturn(billReq).when(pspclIfixAdapterUtil).getFileAsString(PATH_FETCH_PSPCL_BILL);
        doReturn("http://localhost:8080/pspcl/bill").when(pspclIfixAdapterConfiguration).getUrlForFetchPspclBill();
        doReturn(billRes).when(soapServiceRequestRepository).fetchResult(any(), any());

        assertFalse(pspclUtil.getBillsFromPspcl("4256789").isEmpty());
    }

    @Test
    void testGetBillsFromPspclWithEmptyResult() throws IOException {
        MockitoAnnotations.openMocks(this);
        doReturn(billReq).when(pspclIfixAdapterUtil).getFileAsString(PATH_FETCH_PSPCL_BILL);
        doReturn("http://localhost:8080/pspcl/bill").when(pspclIfixAdapterConfiguration).getUrlForFetchPspclBill();
        doReturn(billRes).when(soapServiceRequestRepository).fetchResult(any(), any());

        JsonNode jsonNode = new ObjectMapper().createObjectNode();

        doReturn(jsonNode).when(xmlMapper).readTree(any(byte[].class));

        assertTrue(pspclUtil.getBillsFromPspcl("4256789").isEmpty());
    }

    @Test
    void testGetPaymentsFromPspclWithEmptyReqFile() {
        assertTrue((new PspclUtil()).getPaymentsFromPspcl("4256789").isEmpty());
    }

    @Test
    void testGetPaymentsFromPspcl() throws IOException {
        doReturn(paymentReq).when(pspclIfixAdapterUtil).getFileAsString(PATH_FETCH_PSPCL_PAYMENT);
        doReturn("http://localhost:8080/pspcl/payment").when(pspclIfixAdapterConfiguration).getUrlForFetchPspclPayment();
        doReturn(paymentRes).when(soapServiceRequestRepository).fetchResult(any(), any());

        assertFalse(pspclUtil.getPaymentsFromPspcl("4256789").isEmpty());
    }

    @Test
    void testGetPaymentsFromPspclWithEmptyResult() throws IOException {
        MockitoAnnotations.openMocks(this);
        doReturn(paymentReq).when(pspclIfixAdapterUtil).getFileAsString(PATH_FETCH_PSPCL_PAYMENT);
        doReturn("http://localhost:8080/pspcl/payment").when(pspclIfixAdapterConfiguration).getUrlForFetchPspclPayment();
        doReturn(paymentRes).when(soapServiceRequestRepository).fetchResult(any(), any());

        JsonNode jsonNode = new ObjectMapper().createObjectNode();

        doReturn(jsonNode).when(xmlMapper).readTree(any(byte[].class));

        assertTrue(pspclUtil.getPaymentsFromPspcl("4256789").isEmpty());
    }
}

